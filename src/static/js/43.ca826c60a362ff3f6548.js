webpackJsonp([43],{HCh3:function(t,e,a){var l=a("tK/V");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("MO7y")("0a91331c",l,!0)},jnW3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("qWzu"),i=a.n(l),s=a("W2fy"),o=a("vLgD");var n=a("z0wn"),r={components:{PanelTitle:s.a},data:function(){return{tableKey:0,listLoading:!0,listQuery:{page:1,limit:20,sort:"-Id",query:""},QueryItems:{Query:""},list:null,total:null,projectData:[]}},created:function(){this.getList()},methods:{getList:function(){var t,e=this;this.listLoading=!0,(t=this.listQuery,Object(o.a)({url:"v1/uw_autofill",method:"get",params:t})).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},open:function(t){var e=this;Object(n.c)(t).then(function(t){console.log(t.data),e.projectData=t.data}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleFilter:function(){this.listQuery.query=i()(this.QueryItems),this.getList()},on_refresh:function(){this.getList()},delete_data:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.a)(t).then(function(t){e.listLoading=!0,"OK"===t.data?(e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()):(e.listLoading=!1,e.$notify({title:"失败",message:t.data,type:"error",duration:2e3}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-alert",{attrs:{title:"",type:"success",closable:!1}},[a("div",{staticStyle:{float:"left",width:"100%",color:"#666"}},[a("h2",[a("router-link",{attrs:{to:{path:"add"}}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[t._v("接入自愈")])],1)],1),t._v("针对每一种告警类型配置对应的处理方案。\n      ")])]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"自愈方案名称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.QueryItems.Query,callback:function(e){t.$set(t.QueryItems,"Query",e)},expression:"QueryItems.Query"}}),t._v(" "),a("el-button",{staticClass:"filter-item",on:{click:function(e){e.stopPropagation(),t.on_refresh(e)}}},[a("i",{staticClass:"fa fa-refresh"})])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"65px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"自愈方案名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"edit/"+e.row.Id}}},[a("span",[t._v(t._s(e.row.Title))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"80px",align:"center",label:"告警数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Value))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"自愈场景"}},[a("el-table-column",{attrs:{width:"330px",align:"center",label:"Metric","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.Tag?a("span",[t._v(t._s(e.row.Metric))]):a("span",[t._v(t._s(e.row.Metric)+"/"+t._s(e.row.Tag))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"60px",align:"center",label:"比较"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Operator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"110px",align:"center",label:"条件值"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Value))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{width:"160px",align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.InsertTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"160px",align:"center",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.UpdateTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"80px",align:"center",label:"创建人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Author))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"80px",align:"center",label:"启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.Isvalid?a("el-tag",{attrs:{type:"danger"}},[t._v("是")]):a("el-tag",{attrs:{type:"info"}},[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"330","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover4",attrs:{placement:"left-start",width:"620",trigger:"click"}},[a("div",{staticStyle:{"margin-left":"10px","font-size":"15px"}},[a("i",{staticClass:"el-icon-date",staticStyle:{color:"#20A0FF"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"8px",color:"#20A0FF"}},[t._v("自愈方案详情")])]),t._v(" "),a("div",{staticClass:"login-bodya"},[a("div",{staticClass:"loginWarpa"},[a("div",{staticClass:"login-forma"},[a("el-form",{ref:"form",attrs:{"label-width":"0"}},[a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"}},[a("label",[t._v("方案名称 ：")]),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(t.projectData.Title))])]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("自愈场景 ：")]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(t.projectData.Metric))]),t._v(" "),""!=t.projectData.Tag?a("span",{staticStyle:{color:"teal"}},[t._v("/"+t._s(t.projectData.Tag))]):t._e(),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(t.projectData.Operator))]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(t.projectData.Value))])])],1)],1)])]),t._v(" "),t._l(t.projectData.Operation,function(e,l){return a("div",[a("div",{staticStyle:{"margin-left":"10px","font-size":"15px"}},[a("i",{staticClass:"el-icon-menu",staticStyle:{color:"#13CE66"}}),t._v(" "),a("span",{staticStyle:{"margin-top":"-20px","margin-left":"8px",color:"#13CE66"}},[t._v("自愈处理 "+t._s(l+1))])]),t._v(" "),a("div",{staticClass:"login-bodya"},[a("div",{staticClass:"loginWarpa"},[a("div",{staticClass:"login-forma"},[a("el-form",{ref:"form",refInFor:!0,attrs:{"label-width":"0"}},[a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("步骤名称 ：")]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(e.Title))])]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("用户 ：")]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(e.User))])]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("机器列表 ：")]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(" "+t._s(e.Hosts)+" ")])]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("脚本命令 ：")]),t._v(" "),a("span",{staticStyle:{color:"teal"}},[t._v(" "+t._s(e.Command)+" ")])])],1)],1)])])])}),t._v(" "),a("div",{staticStyle:{"margin-left":"10px","font-size":"15px"}},[a("i",{staticClass:"el-icon-setting",staticStyle:{color:"#FF4949"}}),a("span",{staticStyle:{"margin-top":"-20px","margin-left":"8px",color:"#FF4949"}},[t._v("自愈通知")])]),t._v(" "),a("div",{staticClass:"login-bodya"},[a("div",{staticClass:"loginWarpa"},[a("div",{staticClass:"login-forma"},[a("el-form",{ref:"form",attrs:{"label-width":"0"}},[a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("超时时间 ：")]),a("span",{staticStyle:{color:"teal"}},[t._v(t._s(t.projectData.Timeout)+" 分")])]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("通知方式 ：")]),t._v(" "),1==t.projectData.BeginNotice?a("span",{staticStyle:{color:"teal"}},[t._v("开始")]):t._e(),t._v(" "),1==t.projectData.SuccNotice?a("span",{staticStyle:{color:"teal"}},[t._v("成功")]):t._e(),t._v(" "),1==t.projectData.FailNotice?a("span",{staticStyle:{color:"teal"}},[t._v("失败")]):t._e()]),t._v(" "),a("el-form-item",{staticClass:"login-itema",staticStyle:{"margin-top":"-20px","margin-left":"-25px"},attrs:{prop:"old_password"}},[a("label",[t._v("通知人员 ：")]),t._v(" "),""!=t.projectData.NoticeTeam?a("span",{staticStyle:{color:"teal"}},[t._v("接收组： "+t._s(t.projectData.NoticeTeam)+" ")]):t._e(),t._v(" "),""!=t.projectData.NoticeUser?a("span",{staticStyle:{color:"teal"}},[t._v("接收人： "+t._s(t.projectData.NoticeUser)+" ")]):t._e()])],1)],1)])])],2),t._v(" "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(a){t.open(e.row.Id)}}},[t._v("查看\n        ")]),t._v(" "),a("router-link",{attrs:{to:{path:"detection/"+e.row.Id},tag:"span"}},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-setting"}},[t._v("检测")])],1),t._v(" "),a("router-link",{attrs:{to:{path:"edit/"+e.row.Id},tag:"span"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"}},[t._v("修改")])],1),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){t.delete_data(e.row.Id)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=a("kgPM")(r,c,!1,function(t){a("HCh3")},null,null);e.default=p.exports},"tK/V":function(t,e,a){(t.exports=a("xCkK")(!1)).push([t.i,"\n.el-dialog {\n  width: 30%\n}\n",""])}});