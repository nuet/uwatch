webpackJsonp([50],{"lhC/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("BqA5"),o={name:"taskssDetail",data:function(){return{task:[],task_id:this.$route.params.id}},methods:{getList:function(){var t=this;Object(r.b)(this.task_id).then(function(e){t.task=e.data.task})}},components:{Terminal:s("uz2w").a}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel"},[s("div",{staticClass:"panel-body",attrs:{"element-loading-text":"拼命加载中"}},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"告警信息:"}},[t._v("\n            "+t._s(t.task.Source)+"\n          ")]),t._v(" "),s("el-form-item",{attrs:{label:"自愈项目:"}},[t._v("\n            "+t._s(t.task.Item)+"\n          ")]),t._v(" "),s("el-form-item",{attrs:{label:"自愈时间:"}},[t._v("\n            "+t._s(t.task.Duration)+"\n          ")])],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"任务状态:"}},[0==t.task.Status?s("span",[t._v("未完成")]):s("span",[t._v("已完成")])]),t._v(" "),s("el-form-item",{attrs:{label:"自愈结果:"}},[t._v("\n            "+t._s(t.task.Result)+"\n          ")]),t._v(" "),s("el-form-item",{attrs:{label:"产生时间:"}},[t._v("\n            "+t._s(t.task.CeateTime)+"\n          ")])],1)],1)],1),t._v(" "),s("terminal",{attrs:{taskId:t.task_id}})],1)])},staticRenderFns:[]},n=s("kgPM")(o,a,!1,null,null,null);e.default=n.exports},uz2w:function(t,e,s){"use strict";var r=s("BqA5"),o={props:["taskId","isJson"],data:function(){return{records:[],showText:[],taskid:1*this.taskId,active:0,time:Date.parse(new Date)/1e3-10}},computed:{test1:function(){this.get_data()},isShowStep:function(){return 1*this.taskId>0}},created:function(){this.get_data();var t=this;this.intervalid1=setInterval(function(){t.get_data()},2e3)},beforeDestroy:function(){this.time=Date.parse(new Date)/1e3,clearInterval(this.intervalid1)},methods:{get_data:function(){var t=this,e={taskId:this.taskId,time:this.time};Object(r.a)(e).then(function(e){t.records=e.data;var s=t.records;t.active=0,t.showText=[];for(var r=0;r<s.length;r++){var o="#00ff00";"0"===s[r].status&&(o="red"),t.showText.push({text:s[r].command,color:o});try{var a=JSON.parse(s[r].memo)}catch(t){console.log(t);continue}if("string"==typeof a)t.showText.push({text:s[r].memo,color:o});else if("[object Array]"===Object.prototype.toString.call(a))for(var n=0;n<a.length;n++)try{t.showText.push({text:"IP:"+a[n].Host+"    执行命令:"+s[r].command,color:o}),a[n].ErrorInfo?t.showText.push({text:"错误结果:\n"+a[n].Result,color:o}):t.showText.push({text:"执行结果:\n"+a[n].Result,color:o}),a[n].ErrorInfo&&t.showText.push({text:"错误:"+a[n].ErrorInfo,color:o}),t.showText.push({text:"=============",color:o})}catch(t){console.log(t)}else t.showText.push({text:"执行结果:\n"+a.Result,color:o}),a.ErrorInfo&&t.showText.push({text:"错误:"+a.ErrorInfo,color:o}),t.showText.push({text:"=============",color:o});t.active=t.active+1,"1"===s[r].is_final&&(setTimeout(clearInterval(t.intervalid1),5e3),t.showText.push({text:"执行完成",color:o}))}})}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{directives:[{name:"show",rawName:"v-show",value:t.isShowStep,expression:"isShowStep"}]},[s("el-col",{attrs:{span:24}},[s("el-steps",{attrs:{active:t.active}},t._l(t.records,function(t,e){return s("el-step",{key:e,attrs:{title:"步骤"+String(e+1),description:t.title}})}))],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showText.length,expression:"showText.length"}],staticStyle:{margin:"5px 5px 0px",padding:"3px",border:"1px dashed rgb(0, 160, 198)","background-color":"rgb(0,0,0)"}},[s("code",{staticStyle:{"background-color":"rgb(0, 0, 0)",color:"#00ff00"}},[s("br"),t._v(" "),t._l(t.showText,function(e){return s("span",{style:{color:e.color}},[s("pre",{staticStyle:{"background-color":"rgb(0, 0, 0)",padding:"0px","font-size":"16px",border:"0px",margin:"0px"},style:{color:e.color},domProps:{innerHTML:t._s(e.text)}}),t._v(" "),s("br")])}),t._v(" "),s("br")],2)])],1)},staticRenderFns:[]},n=s("kgPM")(o,a,!1,null,null,null);e.a=n.exports}});