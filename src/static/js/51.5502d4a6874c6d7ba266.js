webpackJsonp([51],{DHja:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("W2fy"),r=o("uz2w"),a=o("z0wn"),n={data:function(){return{route_id:this.$route.params.id,load_data:!1}},created:function(){var t=this;this.route_id?this.detection_data():(this.$message({message:"自愈方案不存在",type:"warning"}),setTimeout(function(){t.$router.push({name:"autofill-access-list"})},500))},methods:{detection_data:function(){var t=this;Object(a.b)(this.route_id).then(function(e){"OK"===e.data&&t.$message({message:"检测成功",type:"success"})}).catch(function(t){console.log(t)})}},components:{PanelTitle:s.a,Terminal:r.a}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel"},[e("panel-title",{attrs:{title:this.$route.meta.title}}),this._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.load_data,expression:"load_data"}],staticClass:"panel-body",attrs:{"element-loading-text":"拼命加载中"}},[e("terminal",{attrs:{taskId:-1}})],1)],1)},staticRenderFns:[]},l=o("kgPM")(n,i,!1,null,null,null);e.default=l.exports},uz2w:function(t,e,o){"use strict";var s=o("BqA5"),r={props:["taskId","isJson"],data:function(){return{records:[],showText:[],taskid:1*this.taskId,active:0,time:Date.parse(new Date)/1e3-10}},computed:{test1:function(){this.get_data()},isShowStep:function(){return 1*this.taskId>0}},created:function(){this.get_data();var t=this;this.intervalid1=setInterval(function(){t.get_data()},2e3)},beforeDestroy:function(){this.time=Date.parse(new Date)/1e3,clearInterval(this.intervalid1)},methods:{get_data:function(){var t=this,e={taskId:this.taskId,time:this.time};Object(s.a)(e).then(function(e){t.records=e.data;var o=t.records;t.active=0,t.showText=[];for(var s=0;s<o.length;s++){var r="#00ff00";"0"===o[s].status&&(r="red"),t.showText.push({text:o[s].command,color:r});try{var a=JSON.parse(o[s].memo)}catch(t){console.log(t);continue}if("string"==typeof a)t.showText.push({text:o[s].memo,color:r});else if("[object Array]"===Object.prototype.toString.call(a))for(var n=0;n<a.length;n++)try{t.showText.push({text:"IP:"+a[n].Host+"    执行命令:"+o[s].command,color:r}),a[n].ErrorInfo?t.showText.push({text:"错误结果:\n"+a[n].Result,color:r}):t.showText.push({text:"执行结果:\n"+a[n].Result,color:r}),a[n].ErrorInfo&&t.showText.push({text:"错误:"+a[n].ErrorInfo,color:r}),t.showText.push({text:"=============",color:r})}catch(t){console.log(t)}else t.showText.push({text:"执行结果:\n"+a.Result,color:r}),a.ErrorInfo&&t.showText.push({text:"错误:"+a.ErrorInfo,color:r}),t.showText.push({text:"=============",color:r});t.active=t.active+1,"1"===o[s].is_final&&(setTimeout(clearInterval(t.intervalid1),5e3),t.showText.push({text:"执行完成",color:r}))}})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",{directives:[{name:"show",rawName:"v-show",value:t.isShowStep,expression:"isShowStep"}]},[o("el-col",{attrs:{span:24}},[o("el-steps",{attrs:{active:t.active}},t._l(t.records,function(t,e){return o("el-step",{key:e,attrs:{title:"步骤"+String(e+1),description:t.title}})}))],1)],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showText.length,expression:"showText.length"}],staticStyle:{margin:"5px 5px 0px",padding:"3px",border:"1px dashed rgb(0, 160, 198)","background-color":"rgb(0,0,0)"}},[o("code",{staticStyle:{"background-color":"rgb(0, 0, 0)",color:"#00ff00"}},[o("br"),t._v(" "),t._l(t.showText,function(e){return o("span",{style:{color:e.color}},[o("pre",{staticStyle:{"background-color":"rgb(0, 0, 0)",padding:"0px","font-size":"16px",border:"0px",margin:"0px"},style:{color:e.color},domProps:{innerHTML:t._s(e.text)}}),t._v(" "),o("br")])}),t._v(" "),o("br")],2)])],1)},staticRenderFns:[]},n=o("kgPM")(r,a,!1,null,null,null);e.a=n.exports}});